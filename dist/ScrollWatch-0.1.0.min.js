/*! ScrollWatch v0.1.0 | (c) Mon Feb 23 2015 23:26:21 GMT-0500 (EST) Evan Dull <evandull@gmail.com> | License: MIT | https://github.com/edull24/ScrollWatch.git*/
!function(t,i){"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?module.exports=i():t.ScrollWatch=i()}(this,function(){"use strict";var t=0,i={},n="scroll-watch-ignore",e={container:window.document.documentElement,watch:"[data-scroll-watch]",watchOnce:!0,inViewClass:"scroll-watch-in-view",scrollDebounce:200,resizeDebounce:500,watchOffset:0,infiniteScroll:!1,infiniteOffset:0,onElementInView:function(){},onElementOutOfView:function(){},onInfiniteXInView:function(){},onInfiniteYInView:function(){}},l="scrollwatchinit",s=function(t){var i,n,e,l=arguments.length;for(t=t||{},i=1;l>i;i++)if(e=arguments[i])for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},c=function(){E.call(this)||(i[this._id].config.container=document.querySelector(i[this._id].config.container))},o=function(){i[this._id].elements=Array.prototype.slice.call(document.querySelectorAll(i[this._id].config.watch+":not(."+n+")"))},r=function(){i[this._id].lastScrollPosition=m.call(this)},a=function(t){f.call(this,t),h.call(this,t),r.call(this)},f=function(t){var e,l,s=i[this._id],c=s.elements.length,o=s.config,r=o.inViewClass,a={eventType:t};for(l=0;c>l;l++)e=s.elements[l],a.el=e,"scroll"===t&&(a.direction=v.call(this,_.call(this))),S.call(this,e)?e.classList.contains(r)||(e.classList.add(r),o.onElementInView.call(this,a),o.watchOnce&&(s.elements.splice(l,1),c--,l--,e.classList.add(n))):e.classList.contains(r)&&(e.classList.remove(r),o.onElementOutOfView.call(this,a))},h=function(t){var n,e,s,c,o,r,a,f=i[this._id],h=f.config;if(h.infiniteScroll&&!f.isInfiniteScrollPaused)for(e=["x","y"],r=["onInfiniteXInView","onInfiniteYInView"],s=h.container,c=x.call(this),o=[s.scrollWidth,s.scrollHeight],a={},n=0;2>n;n++)("scroll"===t&&I.call(this,e[n])||"resize"===t||"refresh"===t||t===l)&&c[e[n]].end+h.infiniteOffset>=o[n]&&(a.eventType=t,"scroll"===t&&(a.direction=v.call(this,e[n])),h[r[n]].call(this,a))},d=function(){clearTimeout(i[this._id].debounceTimer)},u=function(){var t=w.call(this);t.addEventListener("scroll",i[this._id].handler,!1),t.addEventListener("resize",i[this._id].handler,!1)},y=function(){var t=w.call(this);t.removeEventListener("scroll",i[this._id].handler),t.removeEventListener("resize",i[this._id].handler)},w=function(){return E.call(this)?window:i[this._id].config.container},g=function(){var t={w:i[this._id].config.container.clientWidth,h:i[this._id].config.container.clientHeight};return t},m=function(){var t,n={left:0,top:0};return E.call(this)?(n.left=window.pageXOffset,n.top=window.pageYOffset):(t=i[this._id].config.container,n.left=t.scrollLeft,n.top=t.scrollTop),n},x=function(){var t={x:{},y:{}},i=m.call(this),n=g.call(this);return t.x.start=i.left,t.x.end=t.x.start+n.w,t.x.size=t.x.end-t.x.start,t.y.start=i.top,t.y.end=t.y.start+n.h,t.y.size=t.y.end-t.y.start,t},p=function(t){var n,e={x:{},y:{}},l=x.call(this),s=t.getBoundingClientRect();return E.call(this)?(e.x.start=s.left+l.x.start,e.x.end=s.right+l.x.start,e.y.start=s.top+l.y.start,e.y.end=s.bottom+l.y.start):(n=i[this._id].config.container.getBoundingClientRect(),e.x.start=s.left-n.left+l.x.start,e.x.end=e.x.start+s.width,e.y.start=s.top-n.top+l.y.start,e.y.end=e.y.start+s.height),e.x.size=e.x.end-e.x.start,e.y.size=e.y.end-e.y.start,e},_=function(){return I.call(this,"x")?"x":I.call(this,"y")?"y":void 0},v=function(t){var n={x:["right","left"],y:["down","up"]},e={x:"left",y:"top"},l=i[this._id].lastScrollPosition,s=m.call(this);return s[e[t]]>l[e[t]]?n[t][0]:n[t][1]},I=function(t){var n={x:"left",y:"top"},e=i[this._id].lastScrollPosition,l=m.call(this);return l[n[t]]!==e[n[t]]},S=function(t){var n=x.call(this),e=p.call(this,t),l=i[this._id].config.watchOffset;return O(e,n,l)&&b(e,n,l)},O=function(t,i,n){return t.y.start<i.y.end+n&&t.y.end>i.y.start-n},b=function(t,i,n){return t.x.start<i.x.end+n&&t.x.end>i.x.start-n},E=function(){return i[this._id].config.container===window.document.documentElement},L=function(t){s(i[this._id].config,e,t)},P=function(n){Object.defineProperty(this,"_id",{value:t++}),i[this._id]={config:{},elements:[],lastScrollPosition:{},debounceTimer:null,isInfiniteScrollPaused:!1,handler:function(t){var n=i[this._id],e=n.config,l=t.type,s="scroll"===l?e.scrollDebounce:e.resizeDebounce;d.call(this),n.debounceTimer=setTimeout(function(){a.call(this,l)}.bind(this),s)}.bind(this)},L.call(this,n),c.call(this),u.call(this),o.call(this),r.call(this),f.call(this,l),h.call(this,l)};return P.prototype={refresh:function(){o.call(this),a.call(this,"refresh")},destroy:function(){y.call(this),d.call(this),delete i[this._id]},pauseInfiniteScroll:function(){i[this._id].isInfiniteScrollPaused=!0},resumeInfiniteScroll:function(){i[this._id].isInfiniteScrollPaused=!1}},P});
//# sourceMappingURL=ScrollWatch-0.1.0.min.js.map