/*! ScrollWatch v0.1.0 | (c) Mon Feb 23 2015 22:40:38 GMT-0500 (EST) Evan Dull <evandull@gmail.com> | License: MIT | https://github.com/edull24/ScrollWatch.git*/
!function(t,i){"use strict";var n=0,e={},l="scroll-watch-ignore",s={container:t.document.documentElement,watch:"[data-scroll-watch]",watchOnce:!0,inViewClass:"scroll-watch-in-view",scrollDebounce:200,resizeDebounce:500,watchOffset:0,infiniteScroll:!1,infiniteOffset:0,onElementInView:function(){},onElementOutOfView:function(){},onInfiniteXInView:function(){},onInfiniteYInView:function(){}},c="scrollwatchinit",o=function(t){var i,n,e,l=arguments.length;for(t=t||{},i=1;l>i;i++)if(e=arguments[i])for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},r=function(){P.call(this)||(e[this._id].config.container=i.querySelector(e[this._id].config.container))},a=function(){e[this._id].elements=Array.prototype.slice.call(i.querySelectorAll(e[this._id].config.watch+":not(."+l+")"))},h=function(){e[this._id].lastScrollPosition=_.call(this)},f=function(t){d.call(this,t),u.call(this,t),h.call(this)},d=function(t){var i,n,s=e[this._id],c=s.elements.length,o=s.config,r=o.inViewClass,a={eventType:t};for(n=0;c>n;n++)i=s.elements[n],a.el=i,"scroll"===t&&(a.direction=S.call(this,I.call(this))),b.call(this,i)?i.classList.contains(r)||(i.classList.add(r),o.onElementInView.call(this,a),o.watchOnce&&(s.elements.splice(n,1),c--,n--,i.classList.add(l))):i.classList.contains(r)&&(i.classList.remove(r),o.onElementOutOfView.call(this,a))},u=function(t){var i,n,l,s,o,r,a,h=e[this._id],f=h.config;if(f.infiniteScroll&&!h.isInfiniteScrollPaused)for(n=["x","y"],r=["onInfiniteXInView","onInfiniteYInView"],l=f.container,s=v.call(this),o=[l.scrollWidth,l.scrollHeight],a={},i=0;2>i;i++)("scroll"===t&&O.call(this,n[i])||"resize"===t||"refresh"===t||t===c)&&s[n[i]].end+f.infiniteOffset>=o[i]&&(a.eventType=t,"scroll"===t&&(a.direction=S.call(this,n[i])),f[r[i]].call(this,a))},y=function(){clearTimeout(e[this._id].debounceTimer)},g=function(){var t=m.call(this);t.addEventListener("scroll",e[this._id].handler,!1),t.addEventListener("resize",e[this._id].handler,!1)},x=function(){var t=m.call(this);t.removeEventListener("scroll",e[this._id].handler),t.removeEventListener("resize",e[this._id].handler)},m=function(){return P.call(this)?t:e[this._id].config.container},w=function(){var t={w:e[this._id].config.container.clientWidth,h:e[this._id].config.container.clientHeight};return t},_=function(){var i,n={left:0,top:0};return P.call(this)?(n.left=t.pageXOffset,n.top=t.pageYOffset):(i=e[this._id].config.container,n.left=i.scrollLeft,n.top=i.scrollTop),n},v=function(){var t={x:{},y:{}},i=_.call(this),n=w.call(this);return t.x.start=i.left,t.x.end=t.x.start+n.w,t.x.size=t.x.end-t.x.start,t.y.start=i.top,t.y.end=t.y.start+n.h,t.y.size=t.y.end-t.y.start,t},p=function(t){var i,n={x:{},y:{}},l=v.call(this),s=t.getBoundingClientRect();return P.call(this)?(n.x.start=s.left+l.x.start,n.x.end=s.right+l.x.start,n.y.start=s.top+l.y.start,n.y.end=s.bottom+l.y.start):(i=e[this._id].config.container.getBoundingClientRect(),n.x.start=s.left-i.left+l.x.start,n.x.end=n.x.start+s.width,n.y.start=s.top-i.top+l.y.start,n.y.end=n.y.start+s.height),n.x.size=n.x.end-n.x.start,n.y.size=n.y.end-n.y.start,n},I=function(){return O.call(this,"x")?"x":O.call(this,"y")?"y":void 0},S=function(t){var i={x:["right","left"],y:["down","up"]},n={x:"left",y:"top"},l=e[this._id].lastScrollPosition,s=_.call(this);return s[n[t]]>l[n[t]]?i[t][0]:i[t][1]},O=function(t){var i={x:"left",y:"top"},n=e[this._id].lastScrollPosition,l=_.call(this);return l[i[t]]!==n[i[t]]},b=function(t){var i=v.call(this),n=p.call(this,t),l=e[this._id].config.watchOffset;return E(n,i,l)&&L(n,i,l)},E=function(t,i,n){return t.y.start<i.y.end+n&&t.y.end>i.y.start-n},L=function(t,i,n){return t.x.start<i.x.end+n&&t.x.end>i.x.start-n},P=function(){return e[this._id].config.container===t.document.documentElement},V=function(t){o(e[this._id].config,s,t)},z=function(t){Object.defineProperty(this,"_id",{value:n++}),e[this._id]={config:{},elements:[],lastScrollPosition:{},debounceTimer:null,isInfiniteScrollPaused:!1,handler:function(t){var i=e[this._id],n=i.config,l=t.type,s="scroll"===l?n.scrollDebounce:n.resizeDebounce;y.call(this),i.debounceTimer=setTimeout(function(){f.call(this,l)}.bind(this),s)}.bind(this)},V.call(this,t),r.call(this),g.call(this),a.call(this),h.call(this),d.call(this,c),u.call(this,c)};z.prototype={refresh:function(){a.call(this),f.call(this,"refresh")},destroy:function(){x.call(this),y.call(this),delete e[this._id]},pauseInfiniteScroll:function(){e[this._id].isInfiniteScrollPaused=!0},resumeInfiniteScroll:function(){e[this._id].isInfiniteScrollPaused=!1}},t.ScrollWatch=z}(window,document);
//# sourceMappingURL=ScrollWatch-0.1.0.min.js.map