/*! ScrollWatch v0.1.0 | (c) 2014 Evan Dull <evandull@gmail.com> | License: MIT | https://github.com/edull24/ScrollWatch.git */
!function(a,b){"use strict";var c=0,d={},e="scroll-watch-ignore",f={container:a.document.documentElement,watch:"[data-scroll-watch]",watchOnce:!0,inViewClass:"scroll-watch-in-view",scrollDebounce:200,resizeDebounce:500,watchOffset:0,infiniteScroll:!1,infiniteOffset:0,onElementInView:function(){},onElementOutOfView:function(){},onInfiniteXInView:function(){},onInfiniteYInView:function(){}},g="scrollwatchinit",h=function(a){var b,c,d,e=arguments.length;for(a=a||{},b=1;e>b;b++)if(d=arguments[b])for(c in d)d.hasOwnProperty(c)&&(a[c]=d[c]);return a},i=function(){C.call(this)||(d[this._id].config.container=b.querySelector(d[this._id].config.container))},j=function(){d[this._id].elements=Array.prototype.slice.call(b.querySelectorAll(d[this._id].config.watch+":not(."+e+")"))},k=function(){d[this._id].lastScrollPosition=t.call(this)},l=function(a){m.call(this,a),n.call(this,a),k.call(this)},m=function(a){var b,c,f=d[this._id],g=f.elements.length,h=f.config,i=h.inViewClass,j={eventType:a};for(c=0;g>c;c++)b=f.elements[c],j.el=b,"scroll"===a&&(j.direction=x.call(this,w.call(this))),z.call(this,b)?b.classList.contains(i)||(b.classList.add(i),h.onElementInView.call(this,j),h.watchOnce&&(f.elements.splice(c,1),g--,c--,b.classList.add(e))):b.classList.contains(i)&&(b.classList.remove(i),h.onElementOutOfView.call(this,j))},n=function(a){var b,c,e,f,h,i,j,k=d[this._id],l=k.config;if(l.infiniteScroll&&!k.isInfiniteScrollPaused)for(c=["x","y"],i=["onInfiniteXInView","onInfiniteYInView"],e=l.container,f=u.call(this),h=[e.scrollWidth,e.scrollHeight],j={},b=0;2>b;b++)("scroll"===a&&y.call(this,c[b])||"resize"===a||"refresh"===a||a===g)&&f[c[b]].end+l.infiniteOffset>=h[b]&&(j.eventType=a,"scroll"===a&&(j.direction=x.call(this,c[b])),l[i[b]].call(this,j))},o=function(){clearTimeout(d[this._id].debounceTimer)},p=function(){var a=r.call(this);a.addEventListener("scroll",d[this._id].handler,!1),a.addEventListener("resize",d[this._id].handler,!1)},q=function(){var a=r.call(this);a.removeEventListener("scroll",d[this._id].handler),a.removeEventListener("resize",d[this._id].handler)},r=function(){return C.call(this)?a:d[this._id].config.container},s=function(){var a={w:d[this._id].config.container.clientWidth,h:d[this._id].config.container.clientHeight};return a},t=function(){var b,c={left:0,top:0};return C.call(this)?(c.left=a.pageXOffset,c.top=a.pageYOffset):(b=d[this._id].config.container,c.left=b.scrollLeft,c.top=b.scrollTop),c},u=function(){var a={x:{},y:{}},b=t.call(this),c=s.call(this);return a.x.start=b.left,a.x.end=a.x.start+c.w,a.x.size=a.x.end-a.x.start,a.y.start=b.top,a.y.end=a.y.start+c.h,a.y.size=a.y.end-a.y.start,a},v=function(a){var b,c={x:{},y:{}},e=u.call(this),f=a.getBoundingClientRect();return C.call(this)?(c.x.start=f.left+e.x.start,c.x.end=f.right+e.x.start,c.y.start=f.top+e.y.start,c.y.end=f.bottom+e.y.start):(b=d[this._id].config.container.getBoundingClientRect(),c.x.start=f.left-b.left+e.x.start,c.x.end=c.x.start+f.width,c.y.start=f.top-b.top+e.y.start,c.y.end=c.y.start+f.height),c.x.size=c.x.end-c.x.start,c.y.size=c.y.end-c.y.start,c},w=function(){return y.call(this,"x")?"x":y.call(this,"y")?"y":void 0},x=function(a){var b={x:["right","left"],y:["down","up"]},c={x:"left",y:"top"},e=d[this._id].lastScrollPosition,f=t.call(this);return f[c[a]]>e[c[a]]?b[a][0]:b[a][1]},y=function(a){var b={x:"left",y:"top"},c=d[this._id].lastScrollPosition,e=t.call(this);return e[b[a]]!==c[b[a]]},z=function(a){var b=u.call(this),c=v.call(this,a),e=d[this._id].config.watchOffset;return A(c,b,e)&&B(c,b,e)},A=function(a,b,c){return a.y.start<b.y.end+c&&a.y.end>b.y.start-c},B=function(a,b,c){return a.x.start<b.x.end+c&&a.x.end>b.x.start-c},C=function(){return d[this._id].config.container===a.document.documentElement},D=function(a){h(d[this._id].config,f,a)},E=function(a){Object.defineProperty(this,"_id",{value:c++}),d[this._id]={config:{},elements:[],lastScrollPosition:{},debounceTimer:null,isInfiniteScrollPaused:!1,handler:function(a){var b=d[this._id],c=b.config,e=a.type,f="scroll"===e?c.scrollDebounce:c.resizeDebounce;o.call(this),b.debounceTimer=setTimeout(function(){l.call(this,e)}.bind(this),f)}.bind(this)},D.call(this,a),i.call(this),p.call(this),j.call(this),k.call(this),m.call(this,g),n.call(this,g)};E.prototype={refresh:function(){j.call(this),l.call(this,"refresh")},destroy:function(){q.call(this),o.call(this),delete d[this._id]},pauseInfiniteScroll:function(){d[this._id].isInfiniteScrollPaused=!0},resumeInfiniteScroll:function(){d[this._id].isInfiniteScrollPaused=!1}},a.ScrollWatch=E}(window,document);
//# sourceMappingURL=ScrollWatch.min.map